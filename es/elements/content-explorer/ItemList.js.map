{"version":3,"sources":["../../../src/elements/content-explorer/ItemList.js"],"names":["React","classNames","injectIntl","Table","Column","AutoSizer","KeyBinder","nameCellRenderer","iconCellRenderer","focus","messages","headerCellRenderer","sizeCellRenderer","dateCellRenderer","labelCellRenderer","authorCellRenderer","moreOptionsCellRenderer","FIELD_ID","FIELD_NAME","FIELD_SIZE","VIEW_FOLDER","VIEW_RECENTS","FIELD_CONTENT_MODIFIED_AT","FIELD_CREATED_AT","FIELD_CREATED_BY","ItemList","view","isSmall","isMedium","isTouch","rootId","rootElement","canShare","canDownload","canDelete","canPreview","canRename","onItemClick","onItemSelect","onItemDelete","onItemDownload","onItemRename","onItemShare","onItemPreview","onSortChange","currentCollection","tableRef","focusedRow","intl","nameCell","iconCell","createdByCell","createdOnCell","lastUpdatedCell","sizeAccessCell","labelCell","moreOptionsCell","isRecents","hasSort","id","items","sortBy","sortDirection","rowCount","length","rowClassName","index","selected","sort","by","direction","scrollToRow","onSectionRendered","focusOnRender","width","height","rowData","startIndex","stopIndex","rowStartIndex","rowStopIndex","formatMessage","name","updated","size"],"mappings":"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","sourcesContent":["/**\n * @flow\n * @file Item list component\n * @author Box\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport { injectIntl } from 'react-intl';\nimport type { InjectIntlProvidedProps } from 'react-intl';\nimport { Table, Column } from '@box/react-virtualized/dist/es/Table';\nimport AutoSizer from '@box/react-virtualized/dist/es/AutoSizer';\nimport KeyBinder from '../common/KeyBinder';\nimport nameCellRenderer from '../common/item/nameCellRenderer';\nimport iconCellRenderer from '../common/item/iconCellRenderer';\nimport { focus } from '../../utils/dom';\nimport messages from '../common/messages';\nimport headerCellRenderer from './headerCellRenderer';\nimport sizeCellRenderer from './sizeCellRenderer';\nimport dateCellRenderer from './dateCellRenderer';\nimport labelCellRenderer from './labelCellRenderer';\nimport authorCellRenderer from './authorCellRenderer';\nimport moreOptionsCellRenderer from './moreOptionsCellRenderer';\nimport {\n    FIELD_ID,\n    FIELD_NAME,\n    FIELD_SIZE,\n    VIEW_FOLDER,\n    VIEW_RECENTS,\n    FIELD_CONTENT_MODIFIED_AT,\n    FIELD_CREATED_AT,\n    FIELD_CREATED_BY,\n} from '../../constants';\nimport type { View, Collection } from '../../common/types/core';\nimport '@box/react-virtualized/styles.css';\nimport './ItemList.scss';\n\ntype Props = {\n    canDelete: boolean,\n    canDownload: boolean,\n    canPreview: boolean,\n    canRename: boolean,\n    canShare: boolean,\n    currentCollection: Collection,\n    focusedRow: number,\n    isMedium: boolean,\n    isSmall: boolean,\n    isTouch: boolean,\n    onItemClick: Function,\n    onItemDelete: Function,\n    onItemDownload: Function,\n    onItemPreview: Function,\n    onItemRename: Function,\n    onItemSelect: Function,\n    onItemShare: Function,\n    onSortChange: Function,\n    rootElement: HTMLElement,\n    rootId: string,\n    tableRef: Function,\n    view: View,\n} & InjectIntlProvidedProps;\n\nconst ItemList = ({\n    view,\n    isSmall,\n    isMedium,\n    isTouch,\n    rootId,\n    rootElement,\n    canShare,\n    canDownload,\n    canDelete,\n    canPreview,\n    canRename,\n    onItemClick,\n    onItemSelect,\n    onItemDelete,\n    onItemDownload,\n    onItemRename,\n    onItemShare,\n    onItemPreview,\n    onSortChange,\n    currentCollection,\n    tableRef,\n    focusedRow,\n    intl,\n}: Props) => {\n    const nameCell = nameCellRenderer(\n        rootId,\n        view,\n        onItemClick,\n        onItemSelect,\n        canPreview,\n        isSmall, // shows details if false\n        isTouch,\n    );\n    const iconCell = iconCellRenderer(16);\n    // const dateCell = dateCellRenderer();\n    const createdByCell = authorCellRenderer();\n    const createdOnCell = dateCellRenderer('created');\n    const lastUpdatedCell = dateCellRenderer('updated');\n    const sizeAccessCell = sizeCellRenderer();\n    const labelCell = labelCellRenderer();\n    const moreOptionsCell = moreOptionsCellRenderer(\n        canPreview,\n        canShare,\n        canDownload,\n        canDelete,\n        canRename,\n        onItemSelect,\n        onItemDelete,\n        onItemDownload,\n        onItemRename,\n        onItemShare,\n        onItemPreview,\n        isSmall,\n    );\n    const isRecents: boolean = view === VIEW_RECENTS;\n    const hasSort: boolean = view === VIEW_FOLDER;\n    const { id, items = [], sortBy, sortDirection }: Collection = currentCollection;\n    const rowCount: number = items.length;\n    const rowClassName = ({ index }) => {\n        if (index === -1) {\n            return 'bce-item-header-row';\n        }\n\n        const { selected } = items[index];\n        return classNames(`bce-item-row bce-item-row-${index}`, {\n            'bce-item-row-selected': selected,\n        });\n    };\n\n    const sort = ({ sortBy: by, sortDirection: direction }) => {\n        onSortChange(by, direction);\n    };\n\n    return (\n        <KeyBinder\n            id={id}\n            items={items}\n            columnCount={1}\n            rowCount={rowCount}\n            className=\"bce-item-grid\"\n            onRename={onItemRename}\n            onShare={onItemShare}\n            onDownload={onItemDownload}\n            onOpen={onItemClick}\n            onSelect={onItemSelect}\n            onDelete={onItemDelete}\n            scrollToRow={focusedRow}\n            onScrollToChange={({ scrollToRow }) => focus(rootElement, `.bce-item-row-${scrollToRow}`)}\n        >\n            {({ onSectionRendered, scrollToRow, focusOnRender }) => (\n                <AutoSizer>\n                    {({ width, height }) => (\n                        <Table\n                            width={width}\n                            height={height}\n                            headerHeight={42}\n                            rowHeight={42}\n                            rowCount={rowCount}\n                            rowGetter={({ index }) => items[index]}\n                            ref={tableRef}\n                            rowClassName={rowClassName}\n                            scrollToIndex={scrollToRow}\n                            sort={sort}\n                            sortBy={sortBy}\n                            sortDirection={sortDirection}\n                            onRowClick={({ rowData }) => onItemSelect(rowData)}\n                            onRowsRendered={({ startIndex, stopIndex }) => {\n                                onSectionRendered({\n                                    rowStartIndex: startIndex,\n                                    rowStopIndex: stopIndex,\n                                });\n                                if (focusOnRender) {\n                                    focus(rootElement, `.bce-item-row-${scrollToRow}`);\n                                }\n                            }}\n                        >\n                            <Column disableSort dataKey={FIELD_ID} cellRenderer={iconCell} width={50} flexShrink={0} />\n                            <Column\n                                disableSort={!hasSort}\n                                label={intl.formatMessage(messages.name)}\n                                dataKey={FIELD_NAME}\n                                cellRenderer={nameCell}\n                                headerRenderer={headerCellRenderer}\n                                width={300}\n                                flexGrow={1}\n                            />\n                            {isSmall ? null : (\n                                <Column\n                                    className=\"bce-item-coloumn\"\n                                    disableSort={!hasSort}\n                                    label=\"Created On\"\n                                    dataKey={FIELD_CREATED_AT}\n                                    cellRenderer={createdOnCell}\n                                    headerRenderer={headerCellRenderer}\n                                    width={isRecents ? 120 : 300}\n                                    flexGrow={1}\n                                />\n                            )}\n                            {isSmall ? null : (\n                                <Column\n                                    className=\"bce-item-coloumn\"\n                                    disableSort={!hasSort}\n                                    label={intl.formatMessage(messages.updated)}\n                                    dataKey={FIELD_CONTENT_MODIFIED_AT}\n                                    cellRenderer={lastUpdatedCell}\n                                    headerRenderer={headerCellRenderer}\n                                    width={isRecents ? 120 : 300}\n                                    flexGrow={1}\n                                />\n                            )}\n                            {isSmall || isMedium ? null : (\n                                <Column\n                                    className=\"bce-item-coloumn\"\n                                    disableSort={!hasSort}\n                                    label={intl.formatMessage(messages.size)}\n                                    dataKey={FIELD_SIZE}\n                                    cellRenderer={sizeAccessCell}\n                                    headerRenderer={headerCellRenderer}\n                                    width={80}\n                                    flexGrow={0}\n                                />\n                            )}\n                            {isSmall || isMedium ? null : (\n                                <Column\n                                    className=\"bce-item-coloumn\"\n                                    label=\"Author\"\n                                    dataKey={FIELD_CREATED_BY}\n                                    cellRenderer={createdByCell}\n                                    headerRenderer={headerCellRenderer}\n                                    width={80}\n                                    flexGrow={0}\n                                />\n                            )}\n                            {isSmall || isMedium ? null : (\n                                <Column\n                                    className=\"bce-item-coloumn\"\n                                    label=\"Label\"\n                                    dataKey={FIELD_SIZE}\n                                    cellRenderer={labelCell}\n                                    headerRenderer={headerCellRenderer}\n                                    width={80}\n                                    flexGrow={0}\n                                />\n                            )}\n                            <Column\n                                disableSort\n                                dataKey={FIELD_ID}\n                                cellRenderer={moreOptionsCell}\n                                width={isSmall || !canShare ? 58 : 140}\n                                flexGrow={0}\n                            />\n                        </Table>\n                    )}\n                </AutoSizer>\n            )}\n        </KeyBinder>\n    );\n};\n\nexport default injectIntl(ItemList);\n"],"file":"ItemList.js"}